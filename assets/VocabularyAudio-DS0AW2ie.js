import{f as r,g,c,o as d,b as e,h as y,n as x,t as b,F as k}from"./app-Bhpy3giA.js";const w=async(n,s={})=>{const l=new URLSearchParams;Object.entries(s).forEach(([t,a])=>{l.append(t,a)});try{const t=await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){throw console.error("请求出错:",t),t}},f={colleague:{videoUrl:"https://luna-dict-community.nosdn.127.net/GNlAtL1X_4733822575_shd.mp4",picUrl:"https://ydlunacommon-cdn.nosdn.127.net/498c56f4c1a668db31868c304210b783.jpg"},collaborate:{videoUrl:"https://luna-dict-community.nosdn.127.net/4P87xOmD_4733461493_shd.mp4",picUrl:"https://ydlunacommon-cdn.nosdn.127.net/24786c5f8c884fb365833344014f2ea7.jpg"},skeleton:{videoUrl:"https://luna-dict-community.nosdn.127.net/3BTuNFmY_4733477590_shd.mp4",picUrl:"https://ydlunacommon-cdn.nosdn.127.net/9e4c49da6740120a6f6667a6b24a5972.jpg"},estimate:{videoUrl:"https://luna-dict-community.nosdn.127.net/lnbPzrSk_4733462937_shd.mp4",picUrl:"https://ydlunacommon-cdn.nosdn.127.net/03242f4420b5e56b36213a5d036fb00c.jpg"},resume:{videoUrl:"https://luna-dict-community.nosdn.127.net/ylUpAch5_4733468602_shd.mp4"},chore:{videoUrl:"https://luna-dict-community.nosdn.127.net/FSIhk2Of_4733476424_shd.mp4",picUrl:void 0}},D="https://vpn.ruancong130.workers.dev/?url=",O={WORD_QUERY:`${D}${encodeURIComponent("https://dict.youdao.com/jsonapi_s?doctype=json&jsonversion=4")}`},R=async n=>{if(n=n.toLowerCase(),f[n])return f[n];const s=await w(O.WORD_QUERY,{q:n}),l={videoUrl:s.word_video?.word_videos[0]?.video?.url,picUrl:s.pic_dict?.pic[0]?.url};return console.log(`${n} :`,l),l},j={class:"flex items-center"},E={key:0},P={key:1},T={key:0},C={class:"text-orange-500"},A={key:1},F=["src"],I={key:2},L=["src"],S={__name:"VocabularyAudio",props:{vocabulary:{type:String,required:!0}},setup(n){const s=r(null),l=`https://dict.youdao.com/dictvoice?type=1&audio=${n.vocabulary}`,t=r(!1),a=r(!1),m=r(!1),u=r(null),p=r(null),v=r("此单词暂无多媒体数据"),h=g(()=>!u.value&&!p.value&&m.value),_=()=>{s.value.paused?s.value.play():(s.value.pause(),s.value.currentTime=0)},U=async()=>{if(a.value=!a.value,!m.value&&a.value){t.value=!0;try{const i=await R(n.vocabulary);u.value=i.videoUrl,p.value=i.picUrl}catch(i){i instanceof TypeError&&i.message==="Failed to fetch"?v.value="你的网络可能需要梯子":v.value="获取单词信息失败"}finally{t.value=!1,m.value=!0}}};return(i,o)=>(d(),c(k,null,[o[5]||(o[5]=e("h3",{class:"mb-4!"},"单词多媒体信息:",-1)),e("div",j,[o[0]||(o[0]=e("span",null,"美音: ",-1)),e("div",{class:"ml-2 text-orange-500 text-5 active:opacity-50","i-material-symbols-volume-up-rounded":"",onClick:_},[e("audio",{ref_key:"audioElement",ref:s,src:l,style:{display:"none"}},null,512)])]),e("div",{class:"flex items-center",onClick:U},[o[1]||(o[1]=e("span",null,"相关图片视频",-1)),e("div",{class:x(["w-8 h-8",{"i-si:expand-less-fill":a.value,"i-si:expand-more-fill text-orange-500":!a.value}])},null,2)]),t.value?(d(),c("div",E,[...o[2]||(o[2]=[e("p",{class:"text-orange-500"},"加载中...",-1)])])):a.value?(d(),c("div",P,[h.value?(d(),c("div",T,[e("p",C,b(v.value),1)])):p.value?(d(),c("div",A,[o[3]||(o[3]=e("p",null,"图片示意：",-1)),e("img",{class:"max-w-200px max-h-150px",src:p.value,alt:"图片示意"},null,8,F)])):y("",!0),u.value?(d(),c("div",I,[o[4]||(o[4]=e("p",null,"视频讲解：",-1)),e("video",{class:"max-w-95% w-420px",src:u.value,controls:""},null,8,L)])):y("",!0)])):y("",!0)],64))}};export{S as default};
