import{_ as e,c as s,a,o as i}from"./app-C1qGz-hC.js";const t={};function l(o,n){return i(),s("div",null,n[0]||(n[0]=[a(`<h2 id="单节点-单驱动安装-minio" tabindex="-1"><a class="header-anchor" href="#单节点-单驱动安装-minio"><span>单节点-单驱动安装 MinIO</span></a></h2><p>SNSD(Single-Node Single-Drive) 只适用于本地和测试环境，不适用于生产环境。因为它是zero-parity的，没有数据冗余。</p><h3 id="pre-existing-data" tabindex="-1"><a class="header-anchor" href="#pre-existing-data"><span>Pre-Existing Data</span></a></h3><p>MinIO 是否可以启动成功，取决于是否存在 pre-existing data。</p><p>The following table lists the possible storage volume states and MinIO behavior:</p><table><thead><tr><th style="text-align:left;">Storage Volume State</th><th style="text-align:left;">Behavior</th></tr></thead><tbody><tr><td style="text-align:left;">Empty with <strong>no</strong> files, folders, or MinIO backend data</td><td style="text-align:left;">MinIO starts in SNSD mode and creates the zero-parity backend</td></tr><tr><td style="text-align:left;">Existing SNSD zero-parity objects and MinIO backend data</td><td style="text-align:left;">MinIO resumes in SNSD mode</td></tr><tr><td style="text-align:left;">Existing filesystem folders, files, but <strong>no</strong> MinIO backend data</td><td style="text-align:left;">MinIO returns an error and does not start</td></tr><tr><td style="text-align:left;">Existing filesystem folders, files, and legacy “FS-mode” backend data</td><td style="text-align:left;">MinIO returns an error and does not start<em>Changed in version RELEASE.2022-10-29T06-21-33Z.</em></td></tr></tbody></table><h3 id="storage-requirements" tabindex="-1"><a class="header-anchor" href="#storage-requirements"><span>Storage Requirements</span></a></h3><ul><li><p>Use Local Storage</p></li><li><p>Use XFS-Formatting for Drives</p><p>MinIO strongly recommends provisioning XFS formatted drives for storage.</p></li><li><p>Persist Drive Mounting and Mapping Across Reboots</p><p>Use <code>/etc/fstab</code> to ensure consistent drive-to-mount mapping across node reboots.</p></li></ul><div class="hint-container caution"><p class="hint-container-title">Caution</p><p><strong>Exclusive access to drives</strong></p><p>MinIO requires exclusive access to the drives or volumes provided for object storage. No other processes, software, scripts, or persons should perform any actions directly on the drives or volumes provided to MinIO or the objects or files MinIO places on them.</p></div><h3 id="memory-requirements" tabindex="-1"><a class="header-anchor" href="#memory-requirements"><span>Memory Requirements</span></a></h3><p><em>Changed in version RELEASE.2024-01-28T22-35-53Z:</em> MinIO pre-allocates 2GiB of system memory at startup.</p><p>MinIO recommends a <em>minimum</em> of 32GiB of memory per host. See <a href="https://min.io/docs/minio/linux/operations/checklists/hardware.html#minio-hardware-checklist-memory" target="_blank" rel="noopener noreferrer">Memory</a> for more guidance on memory allocation in MinIO.</p><h3 id="deploy-minio" tabindex="-1"><a class="header-anchor" href="#deploy-minio"><span>Deploy MinIO</span></a></h3><h4 id="_1-下载-minio-debian-ubuntu" tabindex="-1"><a class="header-anchor" href="#_1-下载-minio-debian-ubuntu"><span>1. 下载 MinIO (Debian/Ubuntu)</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">wget</span> https://dl.min.io/server/minio/release/linux-amd64/archive/minio_20250207232109.0.0_amd64.deb <span class="token parameter variable">-O</span> minio.deb</span>
<span class="line"><span class="token function">sudo</span> dpkg <span class="token parameter variable">-i</span> minio.deb</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>The RPM and DEB packages automatically install MinIO to the necessary system paths and create a minio service for systemctl.</p></blockquote><h4 id="_2-create-the-environment-variable-file" tabindex="-1"><a class="header-anchor" href="#_2-create-the-environment-variable-file"><span>2. Create the Environment Variable File</span></a></h4><p>Create an environment variable file at <code>/etc/default/minio</code>. The MinIO Server container can use this file as the source of all <a href="https://min.io/docs/minio/linux/reference/minio-server/settings.html#minio-server-environment-variables" target="_blank" rel="noopener noreferrer">environment variables</a>.</p><p>The following example provides a starting environment file:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># MINIO_ROOT_USER and MINIO_ROOT_PASSWORD sets the root account for the MinIO server.</span></span>
<span class="line"><span class="token comment"># This user has unrestricted permissions to perform S3 and administrative API operations on any resource in the deployment.</span></span>
<span class="line"><span class="token comment"># Omit to use the default values &#39;minioadmin:minioadmin&#39;.</span></span>
<span class="line"><span class="token comment"># MinIO recommends setting non-default values as a best practice, regardless of environment</span></span>
<span class="line"></span>
<span class="line"><span class="token assign-left variable">MINIO_ROOT_USER</span><span class="token operator">=</span>myminioadmin</span>
<span class="line"><span class="token assign-left variable">MINIO_ROOT_PASSWORD</span><span class="token operator">=</span>minio-secret-key-change-me</span>
<span class="line"></span>
<span class="line"><span class="token comment"># MINIO_VOLUMES sets the storage volume or path to use for the MinIO server.</span></span>
<span class="line"></span>
<span class="line"><span class="token assign-left variable">MINIO_VOLUMES</span><span class="token operator">=</span><span class="token string">&quot;/mnt/data&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># MINIO_OPTS sets any additional commandline options to pass to the MinIO server.</span></span>
<span class="line"><span class="token comment"># For example, \`--console-address :9001\` sets the MinIO Console listen port</span></span>
<span class="line"><span class="token assign-left variable">MINIO_OPTS</span><span class="token operator">=</span><span class="token string">&quot;--console-address :9001&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-start-the-minio-service" tabindex="-1"><a class="header-anchor" href="#_3-start-the-minio-service"><span>3. Start the MinIO Service</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> systemctl start minio.service</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Use the following commands to confirm the service is online and functional:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> systemctl status minio.service</span>
<span class="line">journalctl <span class="token parameter variable">-f</span> <span class="token parameter variable">-u</span> minio.service</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>设置自启动</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> minio.service</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The <code>journalctl</code> output should resemble the following:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">Status:         <span class="token number">1</span> Online, <span class="token number">0</span> Offline.</span>
<span class="line">API: http://192.168.2.100:9000  http://127.0.0.1:9000</span>
<span class="line">RootUser: myminioadmin</span>
<span class="line">RootPass: minio-secret-key-change-me</span>
<span class="line">Console: http://192.168.2.100:9001 http://127.0.0.1:9001</span>
<span class="line">RootUser: myminioadmin</span>
<span class="line">RootPass: minio-secret-key-change-me</span>
<span class="line"></span>
<span class="line">Command-line: https://min.io/docs/minio/linux/reference/minio-mc.html</span>
<span class="line">   $ <span class="token function">mc</span> <span class="token builtin class-name">alias</span> <span class="token builtin class-name">set</span> myminio http://10.0.2.100:9000 myminioadmin minio-secret-key-change-me</span>
<span class="line"></span>
<span class="line">Documentation: https://min.io/docs/minio/linux/index.html</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-connect-to-the-minio-service" tabindex="-1"><a class="header-anchor" href="#_4-connect-to-the-minio-service"><span>4. Connect to the MinIO Service</span></a></h4><ul><li>Console</li></ul><p>访问 <code>http://192.168.2.100:9001</code></p><p>账号密码为环境变量文件中设置的 <code>MINIO_ROOT_USER</code> 和 <code>MINIO_ROOT_PASSWORD</code></p><ul><li><p>Command-line</p><ol><li>安装 <code>mc</code> 命令行工具</li></ol><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">curl</span> https://dl.min.io/client/mc/release/linux-amd64/mc <span class="token punctuation">\\</span></span>
<span class="line">--create-dirs <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">-o</span> <span class="token environment constant">$HOME</span>/minio-binaries/mc</span>
<span class="line"></span>
<span class="line"><span class="token function">chmod</span> +x <span class="token environment constant">$HOME</span>/minio-binaries/mc</span>
<span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token environment constant">$HOME</span>/minio-binaries/</span>
<span class="line"></span>
<span class="line"><span class="token function">mc</span> <span class="token parameter variable">--help</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>要注意下载相应处理器平台的 <code>mc</code> 命令行工具</p></blockquote><ol start="2"><li>设置别名</li></ol><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">mc</span> <span class="token builtin class-name">alias</span> <span class="token builtin class-name">set</span> myminio http://192.168.2.100:9000 myminioadmin minio-secret-key-change-me</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>设置好对应的账号与密码</p></blockquote><ol start="3"><li>测试alias是否设置成功</li></ol><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">mc</span> <span class="token function">ls</span> myminio/mybucket</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><h2 id="集群安装-minio" tabindex="-1"><a class="header-anchor" href="#集群安装-minio"><span>集群安装 MinIO</span></a></h2><p>A cluster refers to an entire MinIO deployment consisting of one or more Server Pools.</p><p>Consider the command below that creates a cluster consisting of two Server Pools, each with 4 minio server nodes and 4 drives per node for a total of 32 drives.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">minio server https://minio<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span>.4<span class="token punctuation">}</span>.example.net/mnt/disk<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span>.4<span class="token punctuation">}</span> <span class="token punctuation">\\</span></span>
<span class="line">             https://minio<span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">..</span>.8<span class="token punctuation">}</span>.example.net/mnt/disk<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span>.4<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">             <span class="token operator">|</span>                    Server Pool                <span class="token operator">|</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container note"><p class="hint-container-title">Note</p><p>Once you create a server pool you cannot change its size, but you can add or remove capacity at any time by adding or decommissioning pools.</p></div>`,38)]))}const c=e(t,[["render",l],["__file","MinIO.html.vue"]]),p=JSON.parse('{"path":"/Backend/MinIO/MinIO.html","title":"MinIO","lang":"en-US","frontmatter":{"title":"MinIO","description":"MinIO学习","keywords":"MinIO, MinIO学习","sidebarDepth":2},"headers":[{"level":2,"title":"单节点-单驱动安装 MinIO","slug":"单节点-单驱动安装-minio","link":"#单节点-单驱动安装-minio","children":[{"level":3,"title":"Pre-Existing Data","slug":"pre-existing-data","link":"#pre-existing-data","children":[]},{"level":3,"title":"Storage Requirements","slug":"storage-requirements","link":"#storage-requirements","children":[]},{"level":3,"title":"Memory Requirements","slug":"memory-requirements","link":"#memory-requirements","children":[]},{"level":3,"title":"Deploy MinIO","slug":"deploy-minio","link":"#deploy-minio","children":[]}]},{"level":2,"title":"集群安装 MinIO","slug":"集群安装-minio","link":"#集群安装-minio","children":[]}],"git":{"updatedTime":1739776374000,"contributors":[{"name":"RuanCong","username":"RuanCong","email":"1308811723@qq.com","commits":2,"url":"https://github.com/RuanCong"}]},"filePathRelative":"Backend/MinIO/MinIO.md"}');export{c as comp,p as data};
