import{_ as s,c as n,a,o as i}from"./app-eXo1Omma.js";const l={};function t(d,e){return i(),n("div",null,e[0]||(e[0]=[a(`<h2 id="sqlæ³¨é‡Š" tabindex="-1"><a class="header-anchor" href="#sqlæ³¨é‡Š"><span>sqlæ³¨é‡Š</span></a></h2><p>Two dashes (â€œ--â€) introduce comments. Whatever follows them is ignored up to the end of the line.</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">CREATE TABLE weather (</span>
<span class="line">city varchar(80),</span>
<span class="line">temp_lo int, -- low temperature</span>
<span class="line">temp_hi int, -- high temperature</span>
<span class="line">prcp real, -- precipitation</span>
<span class="line">date date</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å¤§å°å†™ä¸æ•æ„Ÿ" tabindex="-1"><a class="header-anchor" href="#å¤§å°å†™ä¸æ•æ„Ÿ"><span>å¤§å°å†™ä¸æ•æ„Ÿ</span></a></h2><p>SQL is case-insensitive about key words and identifiers, except when identifiers are double-quoted to preserve the case.</p><p>åœ¨ä¸ä½¿ç”¨åŒå¼•å·æ—¶ï¼Œå…³é”®å­—ä¸è¡¨åã€åˆ—åç­‰æ ‡è¯†ç¬¦æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„</p><h2 id="æ•°æ®ç±»å‹" tabindex="-1"><a class="header-anchor" href="#æ•°æ®ç±»å‹"><span>æ•°æ®ç±»å‹</span></a></h2><p>PostgreSQL supports the standard SQL types int, smallint, real, double precision, char(N), varchar(N), date, time, timestamp, and interval, as well as other types of general utility and a rich set of geometric types.</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">CREATE TABLE cities (</span>
<span class="line">name varchar(80),</span>
<span class="line">location point</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>The point type is an example of a PostgreSQL-specific data type.</p></blockquote><h2 id="èšåˆå‡½æ•°ä¸­çš„filter" tabindex="-1"><a class="header-anchor" href="#èšåˆå‡½æ•°ä¸­çš„filter"><span>èšåˆå‡½æ•°ä¸­çš„FILTER</span></a></h2><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">SELECT city, count(*) FILTER (WHERE temp_lo &lt; 45), max(temp_lo)</span>
<span class="line">FROM weather</span>
<span class="line">GROUP BY city;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Here, the count aggregate counts only rows with temp_lo below 45; but the max aggregate is still applied to all rows. å³è¿™ä¸ªtemp_lo &lt; 45çš„æ¡ä»¶åªæœ‰åœ¨è®¡ç®—count(*) ç”Ÿæ•ˆï¼Œåœ¨è®¡ç®—max(temp_lo)æ—¶è¿˜æ˜¯å–æ‰€æœ‰çš„çºªå½•</p></blockquote><h2 id="è§†å›¾" tabindex="-1"><a class="header-anchor" href="#è§†å›¾"><span>è§†å›¾</span></a></h2><p>åˆ›å»ºè§†å›¾</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">CREATE VIEW myview AS</span>
<span class="line">SELECT name, temp_lo, temp_hi, prcp, date, location</span>
<span class="line">FROM weather, cities</span>
<span class="line">WHERE city = name;</span>
<span class="line">SELECT * FROM myview;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="window-function-çª—å£å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#window-function-çª—å£å‡½æ•°"><span>window function(çª—å£å‡½æ•°)</span></a></h2><p>A window function call always contains an OVER clause directly following the window function&#39;s name and argument(s).</p><p>ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªsqlï¼š</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">SELECT depname, empno, salary, avg(salary) OVER (PARTITION BY</span>
<span class="line">depname) FROM empsalary;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­avg()å°±æ˜¯ä¸€ä¸ªçª—å£å‡½æ•°ã€å¸¦æœ‰OVERå…³é”®è¯ã€‘ã€‚</p><p>æŸ¥è¯¢ç»“æœç±»ä¼¼è¿™æ ·ï¼š</p><table><thead><tr><th>depname</th><th>empno</th><th>salary</th><th>avg</th></tr></thead><tbody><tr><td>develop</td><td>11</td><td>5200</td><td>5020.0000000000000000</td></tr><tr><td>develop</td><td>7</td><td>4200</td><td>5020.0000000000000000</td></tr><tr><td>develop</td><td>9</td><td>4500</td><td>5020.0000000000000000</td></tr><tr><td>develop</td><td>8</td><td>6000</td><td>5020.0000000000000000</td></tr><tr><td>develop</td><td>10</td><td>5200</td><td>5020.0000000000000000</td></tr><tr><td>personnel</td><td>5</td><td>3500</td><td>3700.0000000000000000</td></tr><tr><td>personnel</td><td>2</td><td>3900</td><td>3700.0000000000000000</td></tr><tr><td>sales</td><td>3</td><td>4800</td><td>4866.6666666666666667</td></tr><tr><td>sales</td><td>1</td><td>5000</td><td>4866.6666666666666667</td></tr><tr><td>sales</td><td>4</td><td>4800</td><td>4866.6666666666666667</td></tr></tbody></table><p>The PARTITION BY clause within OVER divides the rows into groups, or partitions, that share the same values of the PARTITION BY expression(s).</p><hr><p>There is another important concept associated with window functions: for each row, there is a set of rows within its partition called its window frame. Some window functions act only on the rows of the window frame, rather than of the whole partition. By default, if ORDER BY is supplied then the frame consists of all rows from the start of the partition up through the current row, plus any following rows that are equal to the current row according to the ORDER BY clause. When ORDER BY is omitted the default frame consists of all rows in the partition. ã€å¦‚æœorder by æ²¡æœ‰çœç•¥ï¼Œé‚£ä¹ˆè¿™è¡Œçš„window frameçš„èŒƒå›´ä¸ºä»å½“å‰çš„partitionçš„å¼€å§‹ä½ç½®åˆ°å½“å‰è¡Œï¼Œå†åŠ ä¸Šä¸å½“å‰è¡Œçš„order byçš„å­—æ®µçš„å€¼ç›¸ç­‰çš„æ‰€æœ‰è¡Œã€‚å¦‚æœorder by çœç•¥äº†ï¼Œå°±æ˜¯partitionä¸­çš„æ‰€æœ‰è¡Œã€‘</p><p>çœç•¥order by çš„ä¾‹å­ï¼š</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">SELECT salary, sum(salary) OVER () FROM empsalary;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æŸ¥è¯¢ç»“æœ ï¼š</p><table><thead><tr><th>salary</th><th>sum</th></tr></thead><tbody><tr><td>5200</td><td>47100</td></tr><tr><td>5000</td><td>47100</td></tr><tr><td>3500</td><td>47100</td></tr><tr><td>4800</td><td>47100</td></tr><tr><td>3900</td><td>47100</td></tr><tr><td>4200</td><td>47100</td></tr><tr><td>4500</td><td>47100</td></tr><tr><td>4800</td><td>47100</td></tr><tr><td>6000</td><td>47100</td></tr><tr><td>5200</td><td>47100</td></tr></tbody></table><p>å› ä¸ºçœç•¥äº†order by æ‰€æœ‰sum(salary)å°±æ˜¯æ‰€æœ‰è¡Œç›¸åŠ çš„ç»“æœ ã€‚</p><p>æœ‰order by çš„ä¾‹å­ï¼š</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">SELECT salary, sum(salary) OVER (ORDER BY salary) FROM empsalary;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æŸ¥è¯¢ç»“æœï¼š</p><table><thead><tr><th>salary</th><th>sum</th></tr></thead><tbody><tr><td>3500</td><td>3500</td></tr><tr><td>3900</td><td>7400</td></tr><tr><td>4200</td><td>11600</td></tr><tr><td>4500</td><td>16100</td></tr><tr><td>4800</td><td>25700</td></tr><tr><td>4800</td><td>25700</td></tr><tr><td>5000</td><td>30700</td></tr><tr><td>5200</td><td>41100</td></tr><tr><td>5200</td><td>41100</td></tr><tr><td>6000</td><td>47100</td></tr></tbody></table><blockquote><p>æ³¨æ„çœ‹4800ä¸¤æ¡çºªå½•çš„çš„sumçš„å€¼</p></blockquote><p>Window functions are permitted only in the SELECT list and the ORDER BY clause of the query.</p><hr><p>çª—å£å‡½æ•°è¿˜å¯ä»¥ç”¨äºå­æŸ¥è¯¢:</p><ol><li>æŸ¥å‡ºæ¯ä¸ªéƒ¨é—¨æ’åå‰ä¸¤ä½çš„çºªå½•ã€æœ‰ç›¸åŒæ—¶å·¥èµ„æ—¶ï¼Œæ¯ä¸ªéƒ¨é—¨å¯ä»¥å¤§äºä¸¤æ¡çºªå½•ã€‘</li></ol><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">select depname, empno, salary, pos</span>
<span class="line">from (select depname,</span>
<span class="line">             empno,</span>
<span class="line">             salary, rank() over ( partition by depname order by salary desc) as pos</span>
<span class="line">      from empsalary) as temp</span>
<span class="line">where pos &lt; 3;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>æŸ¥å‡ºæ¯ä¸ªéƒ¨é—¨æ’åå‰ä¸¤ä½çš„çºªå½•ã€æœ‰ç›¸åŒæ—¶å·¥èµ„æ—¶ï¼Œå–å·¥å·æ’åé å‰çš„ä¸¤æ¡ã€‘</li></ol><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">SELECT depname, empno, salary, pos</span>
<span class="line">FROM (SELECT depname,</span>
<span class="line">             empno,</span>
<span class="line">             salary,</span>
<span class="line">             rank() OVER (PARTITION BY depname ORDER BY salary DESC,</span>
<span class="line">                 empno) AS pos</span>
<span class="line">      FROM empsalary) AS ss</span>
<span class="line">WHERE pos &lt; 3;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>å½“ä¸€ä¸ªæŸ¥è¯¢ä¸­æ¶‰åŠå¤šä¸ªçª—å£å‡½æ•°æ—¶ï¼Œå¯ä»¥ç”¨WINDDOWå­å¥æ¥å®šä¹‰çª—å£è¡Œä¸ºï¼Œå†åœ¨OVERä¸­å¼•ç”¨</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">SELECT sum(salary) OVER w, avg(salary) OVER w</span>
<span class="line">FROM empsalary</span>
<span class="line">WINDOW w AS (PARTITION BY depname ORDER BY salary DESC);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="inheritance-è¡¨ç»§æ‰¿" tabindex="-1"><a class="header-anchor" href="#inheritance-è¡¨ç»§æ‰¿"><span>Inheritance(è¡¨ç»§æ‰¿)</span></a></h2><p>åƒé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸€æ ·çš„ï¼Œåœ¨postgreSQLä¸­ä¹Ÿæ”¯æŒè¡¨çš„ç»§æ‰¿ã€‚å¦‚ä¸‹ï¼š</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">CREATE TABLE cities (</span>
<span class="line">name text,</span>
<span class="line">population real,</span>
<span class="line">elevation int -- (in ft)</span>
<span class="line">);</span>
<span class="line">CREATE TABLE capitals (</span>
<span class="line">state char(2) UNIQUE NOT NULL</span>
<span class="line">) INHERITS (cities);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å¾€citiesè¡¨ä¸­æ’å…¥æ•°æ®æ—¶ï¼Œæ•°æ®ä¼šå­˜å‚¨åœ¨citiesä¸­çš„ç‰©ç†è¡¨ä¸­ï¼Œæ•°æ®ä¸ä¼šåœ¨capitalsä¸­æ˜¾ç¤ºï¼›å¾€capitalsä¸­æ’å…¥æ•°æ®æ—¶ï¼Œæ•°æ®ä¼šå­˜å‚¨åœ¨capitalsçš„ç‰©ç†è¡¨ä¸­ï¼Œä½†æ•°æ®ä¹Ÿä¼šåŒæ­¥åœ¨citiesä¸­æ˜¾ç¤ºã€‚</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">SELECT name, elevation</span>
<span class="line">FROM cities;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢è¿™ä¸ªæŸ¥è¯¢è¯­å¥ä¼šæŸ¥è¯¢å‡ºä¸¤ä¸ªè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">SELECT name, elevation</span>
<span class="line">FROM ONLY cities;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢è¿™ä¸ªæŸ¥è¯¢è¯­å¥ä¼šåªæŸ¥è¯¢å‡º citiesè¿™ä¸ªè¡¨ä¸­çš„æ•°æ®ã€‚åŒæ ·åœ°ï¼Œ<code>only</code>å…³é”®è¯æ”¯æŒ<code>SELECT, UPDATE, and DELETE</code>è¯­å¥ã€‚</p><h2 id="identifier-æ ‡è¯†ç¬¦" tabindex="-1"><a class="header-anchor" href="#identifier-æ ‡è¯†ç¬¦"><span>Identifier(æ ‡è¯†ç¬¦)</span></a></h2><p>SQL identifiers and key words must begin with a letter (a-z, but also letters with diacritical marks and non-Latin letters) or an underscore (_).</p><p>æ ‡è¯†ç¬¦å¯ä»¥ä»¥ä»»ä½•ä¸€ä¸ªå­—ç¬¦å¼€å¤´ï¼Œè¿™ä¸ªå­—ç¬¦å¯ä»¥æ˜¯a-z(ä¸åŒºåˆ†å¤§å°å†™)ï¼›å¯ä»¥æ˜¯å¸¦å˜éŸ³ç¬¦å·çš„å­—æ¯ï¼Œå¯ä»¥ä¸­æ—¥æ–‡ç­‰ï¼› å¯ä»¥æ˜¯ä¸‹åˆ’çº¿ã€‚ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚æ ‡è¯†ç¬¦åé¢çš„å­—ç¬¦å¯ä»¥æ˜¯å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿å’Œ<code>$</code>ç¬¦å·ã€SQLæ ‡å‡†ä¸­å¹¶ä¸æ”¯æŒï¼Œæ‰€ä»¥ä¼šç»™ç§»æ¤å¸¦æ¥ä¸ä¾¿ã€‘ ã€‚SQLæ ‡å‡†ä¸ä¼šå®šä¹‰åŒ…å«ä»»ä½•æ•°å­—æˆ–è€…ä»¥ä¸‹åˆ’çº¿å¼€å¤´æˆ–è€…ä»¥ä¸‹åˆ’çº¿ç»“æŸçš„å…³é”®è¯ã€‚</p><p>ç³»ç»Ÿä½¿ç”¨çš„æ ‡è¯†ç¬¦çš„å­—èŠ‚é•¿åº¦ä¸è¶…è¿‡<code> NAMEDATALEN-1</code>ä¸ªï¼Œå…¶ä¸­çš„<code> NAMEDATALEN</code>é»˜è®¤å¤§å°ä¸º64ã€‚å£°æ˜åœ¨<code>src/include/pg_config_manual.h</code>å½“ä¸­ã€ä¿®æ”¹æ­¤å¸¸é‡éœ€è¦é‡æ–°ç¼–è¯‘ PostgreSQL æºä»£ç æ‰èƒ½ç”Ÿæ•ˆã€‘</p><p>Key words and unquoted identifiers are case-insensitive. A convention often used is to write key words in upper case and names in lower case, e.g.: <code>UPDATE my_table SET a = 5;</code></p><p>è¿˜æœ‰ä¸€ç§æ˜¯å¸¦æœ‰åŒå¼•å·çš„æ ‡è¯†ç¬¦ï¼ŒåŒå¼•å·é‡Œé¢å¯ä»¥æ˜¯ä»»ä½•å­—ç¬¦ã€é0ã€‘ï¼›è¿™ä½¿å¾—å¤§å°å†™æ•æ„Ÿäº†ã€‚è¿˜å¯ä»¥<code>U&amp;</code>å¼€å¤´æ¥ä½¿ç”¨unicodeç æ¥å®šä¹‰æ ‡è¯†ç¬¦ï¼Œå¦‚<code>U&amp;&quot;d\\0061t\\+000061&quot;</code></p><h2 id="å¸¸é‡" tabindex="-1"><a class="header-anchor" href="#å¸¸é‡"><span>å¸¸é‡</span></a></h2><ol><li>å¸¸è§„å­—ç¬¦ä¸²</li></ol><p>å­—ç¬¦ä¸²ä¸­æœ‰å•å¼•å·æ—¶ï¼Œç”¨ä¸¤ä¸ªç›¸é‚»çš„å•å¼•å·æ¥è¡¨ç¤ºï¼Œå¦‚ï¼š</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">select &#39;my name&#39;&#39;s is LeiTe&#39;;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä¸¤ä¸ªæ¢è¡Œã€è‡³å°‘ä¸€ä¸ªæ¢è¡Œç¬¦ã€‘çš„å­—ç¬¦ä¸²ä¼šè¢«åˆæˆä¸€ä¸ªä¸²ã€‚å¦‚ï¼š</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">SELECT &#39;foo&#39;</span>
<span class="line">&#39;bar&#39;;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢è¿™ä¸ªè¯­å¥ä¸ä¸‹é¢è¿™ä¸ªæ˜¯ç­‰æ•ˆçš„</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">SELECT &#39;foobar&#39;;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><ol start="2"><li>è½¬ä¹‰ç¬¦å­—ç¬¦ä¸²ï¼š</li></ol><p>An escape string constant is specified by writing the letter E (upper or lower case) just before the opening single quote, e.g., <code>E&#39;foo\\nbar&#39;</code>.</p><p>å½“<code>standard_conforming_strings</code>è¿™ä¸ªé…ç½®æ˜¯offæ—¶ï¼Œåœ¨æ™®é€šçš„å­—ç¬¦ä¸²ä¸­çš„<code>\\</code>å’Œ<code>E&#39;&#39;</code>å­—ç¬¦ä¸²ä¸­<code>\\</code>éƒ½æœ‰è½¬ä¹‰çš„åŠŸèƒ½ã€‚åœ¨<code>Post-greSQL 9.1</code>ç‰ˆæœ¬åè¿™ä¸ªè®¾ç½®é»˜è®¤å€¼æ˜¯onã€‚åªæœ‰åœ¨<code>E&#39;&#39;</code>å­—ç¬¦ä¸²ä¸­<code>\\</code>æ‰æœ‰è½¬ä¹‰çš„åŠŸèƒ½ï¼Œå³</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">SELECT &#39;foo&#39;</span>
<span class="line"> &#39;\\nbar&#39;;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªsqlä¸­çš„<code>\\n</code>æ²¡æœ‰æ¢è¡ŒåŠŸèƒ½</p><hr><ol start="3"><li>Unicodeè½¬ä¹‰å­—ç¬¦ä¸²ï¼š</li></ol><p>ç”¨<code>u&amp;</code>å‰ç¼€è¡¨ç¤ºä¸ºunicodeè½¬ä¹‰çš„å­—ç¬¦ä¸²ã€‚<code>\\</code>åŠ 4ä½16è¿›åˆ¶æ•°å­—æˆ–è€…<code>\\+</code>åŠ 6ä½16è¿›åˆ¶æ•°</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">select * from cities where name = &#39;Hello from PostgreSQL! ğŸ‘‹ğŸ˜ŠğŸ‰&#39;;</span>
<span class="line"></span>
<span class="line">SELECT * FROM cities</span>
<span class="line">WHERE name = U&amp;&#39;Hello from PostgreSQL! \\+01F44B\\+01F60A\\+01F389&#39;;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢è¿™ä¸¤ä¸ªæ•ˆæœæ˜¯ç›¸åŒçš„ã€‚</p><hr><ol start="4"><li>Dollar-Quoted String Constantsï¼š</li></ol><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">select $$Dianne&#39;s horse$$;</span>
<span class="line"></span>
<span class="line">select  $SomeTag$Dianne&#39;s horse$SomeTag$;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ä¸¤ä¸ªsqlæ•ˆæœç›¸åŒï¼Œå°†ä¼šå¾—åˆ°<code>Dianne&#39;s horse</code>ã€‚$$é‡Œé¢çš„å­—ç¬¦ä¸²éƒ½ä¸ä¼šè½¬ä¹‰</p><hr><ol start="5"><li>Bit-String Constantsï¼š</li></ol><p><code>B&#39;1001&#39;</code>è¿™ç§æ˜¯åªæœ‰0å’Œ1ï¼›</p><p><code> X&#39;1FF&#39;</code>16è¿›åˆ¶æ•°å­—</p><ol start="6"><li>å…¶å®ƒç±»å‹çš„å¸¸é‡è½¬åŒ–</li></ol><p><code>type &#39;string&#39;</code>ï¼š æ ‡å‡†SQLåªæ”¯æŒéƒ¨åˆ†ç±»å‹è½¬æ¢ï¼ŒpostgreSQLæ”¯æŒæ‰€æœ‰ç±»å‹ <code>&#39;string&#39;::type</code>ï¼špostgreSQLå†å²ä½¿ç”¨åŸå› ï¼Œç›¸å½“äº<code>typename ( &#39;string&#39; )</code> å‡½æ•°è°ƒç”¨ <code>CAST ( &#39;string&#39; AS type )</code>: ç¬¦åˆæ ‡å‡†SQL</p><h2 id="èšåˆå‡½æ•°è¡¨è¾¾å¼" tabindex="-1"><a class="header-anchor" href="#èšåˆå‡½æ•°è¡¨è¾¾å¼"><span>èšåˆå‡½æ•°è¡¨è¾¾å¼</span></a></h2><p>count(*) yields the total number of input rows; count(f1) yields the number of input rows in which f1 is non-null, since count ignores nulls; and count(distinct f1) yields the number of distinct non-null values of f1.</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">-- æ‰€æœ‰è¡Œæ•°</span>
<span class="line">select count(*) from public.cities;</span>
<span class="line">-- nameåˆ—ä¸­énullçš„æ•°é‡</span>
<span class="line">select count(name) from public.cities;</span>
<span class="line">-- nameåˆ—ä¸­énulléé‡å¤çš„æ•°é‡</span>
<span class="line">select count(distinct name) from public.cities;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="table" tabindex="-1"><a class="header-anchor" href="#table"><span>Table</span></a></h2><p>There is a limit on how many columns a table can contain. Depending on the column types, it is between 250 and 1600.</p><p>æä¾›é»˜è®¤å€¼ï¼š</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">CREATE TABLE products (</span>
<span class="line">product_no integer DEFAULT nextval(&#39;products_product_no_seq&#39;),</span>
<span class="line">...</span>
<span class="line">);</span>
<span class="line">-- è¿™ç§æ–¹å¼è¿˜æœ‰ä¸€ç§ç®€çŸ­æ–¹å¼</span>
<span class="line">CREATE TABLE products (</span>
<span class="line">product_no SERIAL,</span>
<span class="line">...</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>DEFAULTSå¯ä»¥ç”¨äºinsertä¸updateè¯­å¥ä¸­</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">INSERT INTO people (id, name, address) VALUES (DEFAULT, &#39;C&#39;,&#39;baz&#39;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="identity-column" tabindex="-1"><a class="header-anchor" href="#identity-column"><span>identity column</span></a></h3><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">CREATE TABLE people (</span>
<span class="line">id bigint GENERATED ALWAYS AS IDENTITY,</span>
<span class="line">...,</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ä»¥ä¸‹æ˜¯ GENERATED ALWAYS AS IDENTITY å’Œ SERIAL çš„è¯¦ç»†å¯¹æ¯”ï¼š</p><table><thead><tr><th>ç‰¹æ€§</th><th>GENERATED ALWAYS AS IDENTITY</th><th>SERIAL</th></tr></thead><tbody><tr><td><strong>å®šä¹‰</strong></td><td>åŸºäº SQL æ ‡å‡†çš„è‡ªå¢åˆ—ï¼Œæ˜¾å¼ç»‘å®šåˆ°åºåˆ—ã€‚</td><td>PostgreSQL ç‰¹æœ‰çš„ä¼ªç±»å‹ï¼Œç®€åŒ–ä¸ºåºåˆ—ç»‘å®šã€‚</td></tr><tr><td><strong>SQL æ ‡å‡†</strong></td><td>ç¬¦åˆ SQL æ ‡å‡†ï¼Œå¯ç§»æ¤æ€§æ›´å¥½ã€‚</td><td>é SQL æ ‡å‡†ï¼Œä»… PostgreSQL æ”¯æŒã€‚</td></tr><tr><td><strong>ç±»å‹æ”¯æŒ</strong></td><td>å¯æ­é… smallintã€integerã€bigintã€‚</td><td>SMALLSERIALã€SERIALã€BIGSERIAL åˆ†åˆ«å¯¹åº”ä¸‰ç§ç±»å‹ã€‚</td></tr><tr><td><strong>æ‰‹åŠ¨æ’å…¥å€¼</strong></td><td>é»˜è®¤ç¦æ­¢ï¼ˆéœ€ OVERRIDING SYSTEM VALUEï¼‰ã€‚</td><td>å…è®¸æ‰‹åŠ¨æ’å…¥å€¼ï¼Œåºåˆ—ä¸å—å½±å“ã€‚</td></tr><tr><td><strong>ä¸¥æ ¼æ€§</strong></td><td>æ›´ä¸¥æ ¼ï¼Œé€‚åˆéœ€è¦æ˜ç¡®è‡ªå¢è¡Œä¸ºçš„åœºæ™¯ã€‚</td><td>æ›´å®½æ¾ï¼Œé€‚åˆå¿«é€Ÿå¼€å‘ã€‚</td></tr><tr><td><strong>åºåˆ—æ§åˆ¶</strong></td><td>å¯åœ¨å»ºè¡¨æ—¶ç›´æ¥æŒ‡å®šåºåˆ—é€‰é¡¹ï¼ˆSTART WITH ç­‰ï¼‰ã€‚</td><td>éœ€è¦æ‰‹åŠ¨ä¿®æ”¹åº•å±‚åºåˆ—ï¼ˆALTER SEQUENCEï¼‰ã€‚</td></tr><tr><td><strong>ç°ä»£åŒ–</strong></td><td>PostgreSQL 10+ æ¨èçš„æ–¹å¼ï¼Œæœªæ¥æ›´ä¼˜æ”¯æŒã€‚</td><td>ä¼ ç»Ÿæ–¹å¼ï¼Œå…¼å®¹æ€§å¼ºä½†è¾ƒè€æ—§ã€‚</td></tr><tr><td><strong>åº•å±‚å®ç°</strong></td><td>ä¾èµ–åºåˆ—ï¼Œç»‘å®šæ›´æ˜¾å¼ï¼Œåˆ—æ ‡è®°ä¸º IDENTITYã€‚</td><td>ä¾èµ–åºåˆ—ï¼Œç»‘å®šé€šè¿‡ DEFAULT nextval() å®ç°ã€‚</td></tr><tr><td><strong>è¿ç§»æ€§</strong></td><td>æ›´é€‚åˆè·¨æ•°æ®åº“è¿ç§»ï¼ˆä¾‹å¦‚ Oracleã€SQL Serverï¼‰ã€‚</td><td>éœ€è½¬æ¢ä¸ºå…¶ä»–æ•°æ®åº“çš„è‡ªå¢æœºåˆ¶ï¼ˆå¦‚ MySQL çš„ AUTO_INCREMENTï¼‰ã€‚</td></tr></tbody></table></blockquote><blockquote><p>æ‰‹åŠ¨æ’å…¥å€¼</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">insert into products_with_id (product_no, name, price) OVERRIDING SYSTEM VALUE</span>
<span class="line">values (200, &#39;test&#39;, default);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="generated-by-default-vs-generated-always" tabindex="-1"><a class="header-anchor" href="#generated-by-default-vs-generated-always"><span><code>GENERATED BY DEFAULT</code> vs <code>GENERATED ALWAYS</code></span></a></h3><ul><li><code>GENERATED BY DEFAULT</code>ï¼šé»˜è®¤ç”Ÿæˆï¼Œä½†ä½ å¯ä»¥ç›´æ¥æ’å…¥å€¼ï¼Œæ— éœ€ <code>OVERRIDING</code></li><li><code>GENERATED ALWAYS</code>ï¼šæ€»æ˜¯ç”±ç³»ç»Ÿç”Ÿæˆï¼Œæƒ³è¦†ç›–å°±å¿…é¡»ç”¨ <code>OVERRIDING SYSTEM VALUE</code></li></ul></blockquote><p>identity columnä¸ä¿è¯å”¯ä¸€æ€§ã€‚</p><p>An identity column is automatically marked as NOT NULL. An identity column, however, does not guarantee uniqueness. (A sequence normally returns unique values, but a sequence could be reset, or values could be inserted manually into the identity column, as discussed above.) Uniqueness would need to be enforced using a PRIMARY KEY or UNIQUE constraint.</p><p>æ ‡è¯†åˆ—ä¸ä¼šåœ¨ç»§æ‰¿ä¸­ä½“ç°ï¼š</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">-- æ¸…ç†ç¯å¢ƒ (å¦‚æœå·²å­˜åœ¨)</span>
<span class="line">DROP TABLE IF EXISTS child1 CASCADE;</span>
<span class="line">DROP TABLE IF EXISTS parent1 CASCADE;</span>
<span class="line"></span>
<span class="line">-- 1. åˆ›å»ºçˆ¶è¡¨ parent1ï¼ŒåŒ…å«ä¸€ä¸ªæ ‡è¯†åˆ— id</span>
<span class="line">CREATE TABLE parent1 (</span>
<span class="line">    id INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,</span>
<span class="line">    description TEXT</span>
<span class="line">);</span>
<span class="line"></span>
<span class="line">-- 2. åˆ›å»ºå­è¡¨ child1ï¼Œç»§æ‰¿è‡ª parent1</span>
<span class="line">-- child1 æ²¡æœ‰ä¸º id åˆ—é‡æ–°å®šä¹‰æ ‡è¯†åˆ—å±æ€§</span>
<span class="line">CREATE TABLE child1 (</span>
<span class="line">    child_specific_attribute TEXT</span>
<span class="line">) INHERITS (parent1);</span>
<span class="line">-- è¿™æ—¶child1ä¸­ç»§æ‰¿çš„idåˆ—ä¸æ˜¯æ ‡è¯†åˆ—ï¼Œä½†æ˜¯idçš„not null çº¦æŸä¼šè¢«ç»§æ‰¿ï¼Œæ‰€ä»¥INSERT INTO child1 (description, child_specific_attribute)</span>
<span class="line">-- VALUES (&#39;Data for child1, id from parent1 sequence&#39;, &#39;Child specific value&#39;); ä¼šæŠ¥é”™</span>
<span class="line"></span>
<span class="line">--   åªæœ‰è¿™æ ·åˆ›å»ºå­è¡¨ child1ï¼Œå¹¶ä¸º id åˆ—æ˜¾å¼å£°æ˜ IDENTITY å±æ€§å­è¡¨ä¸­çš„idåˆ—æ‰ä¸ºæ ‡è¯†åˆ—</span>
<span class="line">CREATE TABLE child1 (</span>
<span class="line">    id INT GENERATED ALWAYS AS IDENTITY (START WITH 100 INCREMENT BY 1), -- å­è¡¨åºåˆ—ä»100å¼€å§‹</span>
<span class="line">    child_specific_attribute TEXT</span>
<span class="line">) INHERITS (parent1);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="generated-columns" tabindex="-1"><a class="header-anchor" href="#generated-columns"><span>Generated Columns</span></a></h3><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">CREATE TABLE people (</span>
<span class="line">...,</span>
<span class="line">height_cm numeric,</span>
<span class="line">height_in numeric GENERATED ALWAYS AS (height_cm / 2.54) STORED</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>PostgreSQL currently implements only stored generated columns.</p></blockquote><h3 id="check-constraint" tabindex="-1"><a class="header-anchor" href="#check-constraint"><span>Check Constraint</span></a></h3><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">CREATE TABLE products (</span>
<span class="line">product_no integer,</span>
<span class="line">name text,</span>
<span class="line">price numeric CHECK (price &gt; 0)</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">-- å¯ä»¥ä¸ºconstraintå•ç‹¬å‘½åä¸€ä¸ªåå­—</span>
<span class="line">CREATE TABLE products (</span>
<span class="line">product_no integer,</span>
<span class="line">name text,</span>
<span class="line">price numeric CONSTRAINT positive_price CHECK (price &gt; 0)</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>CHECK å¯ä»¥å¼•ç”¨å¼•ç”¨å…¶å®ƒåˆ—</p><div class="language-postgresql line-numbers-mode" data-highlighter="prismjs" data-ext="postgresql" data-title="postgresql"><pre><code><span class="line">CREATE TABLE products (</span>
<span class="line">product_no integer,</span>
<span class="line">name text,</span>
<span class="line">price numeric CHECK (price &gt; 0),</span>
<span class="line">discounted_price numeric CHECK (discounted_price &gt; 0),</span>
<span class="line">CHECK (price &gt; discounted_price)</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,114)]))}const p=s(l,[["render",t],["__file","PostgreSQL.html.vue"]]),c=JSON.parse('{"path":"/Backend/PostgreSQL/PostgreSQL.html","title":"","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"sqlæ³¨é‡Š","slug":"sqlæ³¨é‡Š","link":"#sqlæ³¨é‡Š","children":[]},{"level":2,"title":"å¤§å°å†™ä¸æ•æ„Ÿ","slug":"å¤§å°å†™ä¸æ•æ„Ÿ","link":"#å¤§å°å†™ä¸æ•æ„Ÿ","children":[]},{"level":2,"title":"æ•°æ®ç±»å‹","slug":"æ•°æ®ç±»å‹","link":"#æ•°æ®ç±»å‹","children":[]},{"level":2,"title":"èšåˆå‡½æ•°ä¸­çš„FILTER","slug":"èšåˆå‡½æ•°ä¸­çš„filter","link":"#èšåˆå‡½æ•°ä¸­çš„filter","children":[]},{"level":2,"title":"è§†å›¾","slug":"è§†å›¾","link":"#è§†å›¾","children":[]},{"level":2,"title":"window function(çª—å£å‡½æ•°)","slug":"window-function-çª—å£å‡½æ•°","link":"#window-function-çª—å£å‡½æ•°","children":[]},{"level":2,"title":"Inheritance(è¡¨ç»§æ‰¿)","slug":"inheritance-è¡¨ç»§æ‰¿","link":"#inheritance-è¡¨ç»§æ‰¿","children":[]},{"level":2,"title":"Identifier(æ ‡è¯†ç¬¦)","slug":"identifier-æ ‡è¯†ç¬¦","link":"#identifier-æ ‡è¯†ç¬¦","children":[]},{"level":2,"title":"å¸¸é‡","slug":"å¸¸é‡","link":"#å¸¸é‡","children":[]},{"level":2,"title":"èšåˆå‡½æ•°è¡¨è¾¾å¼","slug":"èšåˆå‡½æ•°è¡¨è¾¾å¼","link":"#èšåˆå‡½æ•°è¡¨è¾¾å¼","children":[]},{"level":2,"title":"Table","slug":"table","link":"#table","children":[{"level":3,"title":"identity column","slug":"identity-column","link":"#identity-column","children":[]},{"level":3,"title":"Generated Columns","slug":"generated-columns","link":"#generated-columns","children":[]},{"level":3,"title":"Check Constraint","slug":"check-constraint","link":"#check-constraint","children":[]}]}],"git":{"updatedTime":1749549287000,"contributors":[{"name":"RuanCong","username":"RuanCong","email":"1308811723@qq.com","commits":3,"url":"https://github.com/RuanCong"}]},"filePathRelative":"Backend/PostgreSQL/PostgreSQL.md"}');export{p as comp,c as data};
