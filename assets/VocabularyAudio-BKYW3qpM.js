import{_ as b,g as r,h as f,o as d,c as u,b as t,n as x,t as w,i as y,F as k}from"./app-Bgu3Js-A.js";const D=async(n,o={})=>{const s=new URLSearchParams;Object.entries(o).forEach(([e,a])=>{s.append(e,a)});try{const e=await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("请求出错:",e),e}},h={colleague:{videoUrl:"https://luna-dict-community.nosdn.127.net/GNlAtL1X_4733822575_shd.mp4",picUrl:"https://ydlunacommon-cdn.nosdn.127.net/498c56f4c1a668db31868c304210b783.jpg"},collaborate:{videoUrl:"https://luna-dict-community.nosdn.127.net/4P87xOmD_4733461493_shd.mp4",picUrl:"https://ydlunacommon-cdn.nosdn.127.net/24786c5f8c884fb365833344014f2ea7.jpg"},skeleton:{videoUrl:"https://luna-dict-community.nosdn.127.net/3BTuNFmY_4733477590_shd.mp4",picUrl:"https://ydlunacommon-cdn.nosdn.127.net/9e4c49da6740120a6f6667a6b24a5972.jpg"},estimate:{videoUrl:"https://luna-dict-community.nosdn.127.net/lnbPzrSk_4733462937_shd.mp4",picUrl:"https://ydlunacommon-cdn.nosdn.127.net/03242f4420b5e56b36213a5d036fb00c.jpg"},resume:{videoUrl:"https://luna-dict-community.nosdn.127.net/ylUpAch5_4733468602_shd.mp4"},chore:{videoUrl:"https://luna-dict-community.nosdn.127.net/FSIhk2Of_4733476424_shd.mp4",picUrl:void 0}},M="https://vpn.ruancong130.workers.dev/?url=",O={WORD_QUERY:`${M}${encodeURIComponent("https://dict.youdao.com/jsonapi_s?doctype=json&jsonversion=4")}`},g=async n=>{var e,a,l,i,c;if(n=n.toLowerCase(),h[n])return h[n];const o=await D(O.WORD_QUERY,{q:n}),s={videoUrl:(l=(a=(e=o.word_video)==null?void 0:e.word_videos[0])==null?void 0:a.video)==null?void 0:l.url,picUrl:(c=(i=o.pic_dict)==null?void 0:i.pic[0])==null?void 0:c.url};return console.log(`${n} :`,s),s},P={__name:"VocabularyAudio",props:{vocabulary:{type:String,required:!0}},setup(n,{expose:o}){o();const s=r(null),e=`https://dict.youdao.com/dictvoice?type=1&audio=${n.vocabulary}`,a=r(!1),l=r(!1),i=r(!1),c=r(null),m=r(null),v=r("此单词暂无多媒体数据"),U=f(()=>!c.value&&!m.value&&i.value),_={audioElement:s,audioUrl:e,mediaIsLoading:a,isMore:l,isMediaLoaded:i,videoUrl:c,picUrl:m,noDataTip:v,isNoMediaData:U,togglePlay:()=>{s.value.paused?s.value.play():(s.value.pause(),s.value.currentTime=0)},toggleMore:async()=>{if(l.value=!l.value,!i.value&&l.value){a.value=!0;try{const p=await g(n.vocabulary);c.value=p.videoUrl,m.value=p.picUrl}catch(p){p instanceof TypeError&&p.message==="Failed to fetch"?v.value="你的网络可能需要梯子":v.value="获取单词信息失败"}finally{a.value=!1,i.value=!0}}},ref:r,computed:f,get getWordInfo(){return g}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}},j={class:"flex items-center"},R={key:0},E={key:1},T={key:0},A={class:"text-orange-500"},I={key:1},S=["src"],C={key:2},L=["src"];function F(n,o,s,e,a,l){return d(),u(k,null,[o[5]||(o[5]=t("h3",{class:"mb-4!"},"单词多媒体信息:",-1)),t("div",j,[o[0]||(o[0]=t("span",null,"美音: ",-1)),t("div",{class:"ml-2 text-orange-500 text-5 active:opacity-50","i-material-symbols-volume-up-rounded":"",onClick:e.togglePlay},[t("audio",{ref:"audioElement",src:e.audioUrl,style:{display:"none"}},null,512)])]),t("div",{class:"flex items-center",onClick:e.toggleMore},[o[1]||(o[1]=t("span",null,"相关图片视频",-1)),t("div",{class:x(["w-8 h-8",{"i-si:expand-less-fill":e.isMore,"i-si:expand-more-fill text-orange-500":!e.isMore}])},null,2)]),e.mediaIsLoading?(d(),u("div",R,o[2]||(o[2]=[t("p",{class:"text-orange-500"},"加载中...",-1)]))):e.isMore?(d(),u("div",E,[e.isNoMediaData?(d(),u("div",T,[t("p",A,w(e.noDataTip),1)])):e.picUrl?(d(),u("div",I,[o[3]||(o[3]=t("p",null,"图片示意：",-1)),t("img",{class:"max-w-200px max-h-150px",src:e.picUrl,alt:"图片示意"},null,8,S)])):y("",!0),e.videoUrl?(d(),u("div",C,[o[4]||(o[4]=t("p",null,"视频讲解：",-1)),t("video",{class:"max-w-95% w-420px",src:e.videoUrl,controls:""},null,8,L)])):y("",!0)])):y("",!0)],64)}const Y=b(P,[["render",F],["__file","VocabularyAudio.vue"]]);export{Y as default};
